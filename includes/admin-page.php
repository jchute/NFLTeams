<?php
// Function for the plugin's admin page
function nflteams_admin() {

    // Add Option Page to WordPress Admin
    add_menu_page( 'NFL Team', 'NFL Teams', 'manage_options', 'nflteams', 'nflteams_options', 'data:image/svg+xml;base64,' . base64_encode('
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><g><defs><rect id="b" x="19" y="5.069" width="60.793" height="91.931"></rect></defs><path fill="#82878c" d="M40.562,18.081c0.003,0.028,0.017,0.052,0.017,0.081c0,0.391-0.274,0.705-0.636,0.798 l-0.177,0.252l-0.929-0.211h-0.518l-0.852,1.573l-1.22,1.994h1.132c0.435,0,0.788,0.353,0.788,0.787 c0,0.433-0.353,0.786-0.788,0.786h-2.096l-0.578,0.944l-0.997,1.783h0.578c0.521,0,0.944,0.423,0.944,0.944 s-0.423,0.944-0.944,0.944h-1.632l-0.938,1.678c0,0-0.119,0.663-0.376,1.784h1.103c0.463,0,0.839,0.375,0.839,0.838 c0,0.463-0.376,0.839-0.839,0.839h-1.514c-0.323,1.246-0.755,2.773-1.323,4.511h0.904c0.405,0,0.734,0.328,0.734,0.733 c0,0.406-0.329,0.735-0.734,0.735h-1.398c-0.025,0.072-0.045,0.137-0.071,0.209c-0.465,1.322-0.823,2.851-1.122,4.406h1.28 c0.434,0,0.786,0.352,0.786,0.787c0,0.434-0.352,0.786-0.786,0.786h-1.56c-0.241,1.499-0.434,2.986-0.565,4.301h1.6 c0.434,0,0.786,0.352,0.786,0.787c0,0.434-0.352,0.786-0.786,0.786H26.93c-0.153,1.878-0.196,3.146-0.196,3.146l-0.043,1.784h1.249 c0.493,0,0.892,0.398,0.892,0.891c0,0.491-0.399,0.891-0.892,0.891h-1.291l-0.02,0.841l-0.734,0.628l-0.839-1.047v-0.422h-0.682 c-0.493,0-0.892-0.399-0.892-0.891c0-0.492,0.399-0.891,0.892-0.891h0.682V53.09c0,0,0.027-0.43,0.09-1.153h-0.877 c-0.434,0-0.787-0.353-0.787-0.786c0-0.436,0.353-0.787,0.787-0.787h1.032c0.128-1.183,0.322-2.682,0.583-4.301h-0.567 c-0.434,0-0.786-0.352-0.786-0.786c0-0.435,0.352-0.787,0.786-0.787h0.835c0.115-0.622,0.235-1.251,0.372-1.888 c0.296-1.372,0.453-2.161,0.572-2.727h-0.205c-0.405,0-0.734-0.329-0.734-0.735c0-0.405,0.329-0.733,0.734-0.733h0.573 c0.224-0.738,0.607-1.841,1.485-4.511h-0.117c-0.464,0-0.84-0.376-0.84-0.839c0-0.463,0.376-0.838,0.84-0.838h0.666 c0.024-0.075,0.043-0.134,0.068-0.21c0.369-1.134,0.792-2.218,1.248-3.252h-0.409c-0.522,0-0.945-0.423-0.945-0.944 s0.423-0.944,0.945-0.944h1.308c0.498-0.98,1.015-1.874,1.534-2.727h-0.692c-0.434,0-0.786-0.353-0.786-0.786 c0-0.434,0.352-0.787,0.786-0.787h1.688c1.012-1.515,1.961-2.734,2.7-3.623c-0.325-0.116-0.56-0.419-0.56-0.783 c0-0.463,0.376-0.839,0.839-0.839h2.518c0.423,0,0.759,0.319,0.816,0.727l0.023,0.007L40.562,18.081z M79.003,35.236 c-0.909-8.461-3.007-12.167-3.775-14.124c-0.769-1.959-1.539-4.406-4.126-7.692c-2.586-3.287-3.147-3.357-4.895-5.315 c-1.749-1.958-5.734-3.006-5.734-3.006s-1.259-0.21-4.195,0.489c-2.936,0.699-2.027,0.28-8.251,3.287 c-0.434,0.209-0.89,0.48-1.338,0.726c0.803-0.09,2.601-0.277,6.092-0.564c5.106-0.419,16.921,5.13,16.921,5.13l1.68,2.981 l0.839,4.476l-4.614-2.307c0,0-2.239-1.05-7.623-3.077c-5.385-2.028-8.67-1.678-13.215-2.028c-3.244-0.25-6.586,0.603-8.238,1.113 c-3.339,2.794-6.381,5.845-8.334,8.304c-3.776,4.754-11.467,20.488-11.188,31.886c0.146,5.94,0.35,9.287,0.629,11.625 c0.601-0.487,1.643-1.314,2.116-1.567c0.682-0.369,4.195-0.944,4.195-0.944h3.776c3.357,0,5.716,0.682,8.811,0.997 c3.094,0.312,12.586,3.355,12.586,3.355l9.231,4.615l-7.92,9.02l-8.233-3.461c0,0-3.672-1.101-6.661-1.888s-7.08-0.997-8.6-0.943 c-1.521,0.053-3.672-0.159-5.245,0.891c-0.457,0.305-0.76,0.624-0.978,0.928c0.498,1.125,1.164,2.626,2.08,4.729 c3.724,8.549,8.443,11.907,9.649,12.744c1.207,0.84,3.724,1.363,3.724,1.363c2.622-0.051,1.049,0.491,6.712-1.817 c5.664-2.307,9.371-4.754,14.405-9.09c5.035-4.335,10.28-10.627,12.447-14.543s6.083-10.28,7.271-19.789 C80.191,42.229,79.911,43.697,79.003,35.236"></path></g></svg>'), 99 );

    // Add capability for custom settings
    add_action( 'admin_init', 'register_nflteams' );

}
add_action( 'admin_menu', 'nflteams_admin' );

// Function for custom settings
function register_nflteams() {

    // Require a user to provide an API Key
    register_setting( 'nflteams', 'nflteams-apikey' );

}

// Create the Admin Page
function nflteams_options() {

    ?>

    <div class="wrap">

        <h1>NFL Teams</h1>

        <form action="options.php" method="post">

            <?php settings_fields( 'nflteams' ); ?>
            <?php do_settings_sections( 'nflteams' ); ?>

            <table class="form-table">

                <tr>
                    <th scope="row"><label for="nflteams-apikey">API Key</label></th>
                    <td>
                        <input type="text" name="nflteams-apikey" value="<?php echo esc_attr( get_option( 'nflteams-apikey' ) ); ?>">
                        <p class="description">Enter in the API Key required to obtain data.</p>
                    </td>
                </tr>

            </table>

            <?php submit_button( 'Save Key' ); ?>

        </form>

        <h2>How to use</h2>

        <p>To use this plugin, use the <code>[nflteams]</code> shortcode within your page content. To change the order the teams appear in you can add a "sort" option for either "team", division" or "conference". Example: <code>[nflteams sort="division"]</code>. Shortcode defaults to team.</p>

    </div>

    <?php

}
